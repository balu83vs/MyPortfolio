Бот рассылает вопросы с ответами в виде кнопок и сохраняет ответы. Рассылка производится после ввода команды администратором.

Стэк: Разработка бота на python + aiogram 3, БД - sqllite

Таблицы для БД:

Таблица users. 
    Поля: id(PK), user_id (телеграм id), company_id(FK), team_id(FK), admin(boolean)
Таблица companies. 
    Поля: id(PK), title (уникальное)
Таблица teams. 
    Поля: id(PK), title(уникальное), company_id(FK)
Таблица questions. 
    Поля: id(PK), title(НЕ уникальное поле), date (дата записи в таблицу), team_id(FK), type (может быть двух типов - 1, 2)
Таблица answers. 
    Поля: id(PK), question_id(FK), date, answer_title (ответы могут быть текстовыми (yes\no) или числовыми (от 1 до 5))
Таблица messages. 
    Поля: id(PK), date, title, team_id(FK)

Команды:
    1. /start - Если пользователь сохранен в БД, то пользователю отправляется сообщение: Вы уже есть в Базе.

    2. /help - Появляется справка. Справка любая, я потом сам текстовки поменяю.

    3. /sendall - Проверка, является ли пользователь “админом”. "Админ" проверяется по telegram_id из списка админов.       
        Список админов можно реализовать в БД, можно хардкодом. 
        Если пользователь НЕ админ, то ничего не происходит. 
        Если пользователь админ, то задается три вопроса:
            1. Введите айди команды, которой отправить вопрос. 
            2. Введите вопрос 
            3. Выберите тип вопроса. 
                - Появляется инлайн клавиатура c двумя кнопками YesNo \ Range. 
            4. Отправить? - Появляется инлайн клавиатура с кнопками Да \ Нет. 
                Предыдущие ответы не удаляются. Если нажимается кнопка Да, то вопрос отправляется команде с выбранным id и сохраняется в таблицу questions.

    4. Отправление вопроса. После выполнения шагов из пункта (/sendall) вопрос отправляется только членам выбранной команды. 
    Если вопрос типа YesNo, то вместе с вопросом пользователям отправляется инлайн клавиатура с ответами Да\Нет. 
    Если вопрос типа Range, то отправляется инлайн клавиатура с пятью ответами от 1 до 5. После ответа пользователя вопрос удаляется, а результат сохраняется в таблицу answers. 

    5. /sendallmessage - аналогично команде /sendall с проверкой на админа. Отправка сообщения команде, которое ввел админ. Просто рассылка без ответов и клавиатур. Сообщение сохраняется в таблицу messages.

    6. /sendall и /sendallmessage НЕ должны быть видны в меню команд в боте. /start и /help видны. 